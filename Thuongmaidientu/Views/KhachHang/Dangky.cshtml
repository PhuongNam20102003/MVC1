@model Thuongmaidientu.ViewModels.RegisterVM
@{
    ViewData["Title"] = "Đăng ký";
}

<div class="container py-5">
    <h1 class="mb-4 text-center">Đăng ký tài khoản</h1>

    <div class="card shadow-sm p-4 mx-auto" style="max-width: 850px;">
        <form asp-action="Dangky" enctype="multipart/form-data">

            <div class="row g-3">

                <!-- TÊN ĐĂNG NHẬP -->
                <div class="col-md-6">
                    <label asp-for="MaKh" class="form-label">Tên đăng nhập <sup>*</sup></label>
                    <input asp-for="MaKh" class="form-control" placeholder="Nhập tên đăng nhập..." />
                    <span asp-validation-for="MaKh" class="text-danger"></span>
                </div>

                <!-- MẬT KHẨU + HIỆN/ẨN -->
                <div class="col-md-6">
                    <label asp-for="MatKhau" class="form-label">Mật khẩu <sup>*</sup></label>

                    <div class="input-group">
                        <input asp-for="MatKhau" type="password" id="passwordInput" class="form-control" placeholder="Nhập mật khẩu..." />
                        <button type="button" class="btn btn-outline-secondary" id="togglePassword">👁</button>
                    </div>

                    <small id="passwordStrength" class="mt-1"></small>
                    <span asp-validation-for="MatKhau" class="text-danger"></span>
                </div>

                <!-- HỌ TÊN -->
                <div class="col-md-12">
                    <label asp-for="HoTen" class="form-label">Họ tên <sup>*</sup></label>
                    <input asp-for="HoTen" class="form-control" placeholder="Nhập họ tên..." />
                    <span asp-validation-for="HoTen" class="text-danger"></span>
                </div>

                <!-- GIỚI TÍNH -->
                <div class="col-md-12">
                    <label class="form-label d-block">Giới tính <sup>*</sup></label>

                    <div class="form-check form-check-inline">
                        <input asp-for="GioiTinh" class="form-check-input" type="radio" value="true" id="gtNam" checked />
                        <label class="form-check-label" for="gtNam">Nam</label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input asp-for="GioiTinh" class="form-check-input" type="radio" value="false" id="gtNu" />
                        <label class="form-check-label" for="gtNu">Nữ</label>
                    </div>

                    <span asp-validation-for="GioiTinh" class="text-danger"></span>
                </div>

                <!-- NGÀY SINH -->
                <div class="col-md-6">
                    <label asp-for="NgaySinh" class="form-label">Ngày sinh <sup>*</sup></label>
                    <input asp-for="NgaySinh" type="date" class="form-control" />
                    <span asp-validation-for="NgaySinh" class="text-danger"></span>
                </div>

                <!-- ĐỊA CHỈ -->
                <div class="col-md-6">
                    <label asp-for="DiaChi" class="form-label">Địa chỉ <sup>*</sup></label>
                    <input asp-for="DiaChi" class="form-control" placeholder="Nhập địa chỉ..." />
                    <span asp-validation-for="DiaChi" class="text-danger"></span>
                </div>

                <!-- ĐIỆN THOẠI -->
                <div class="col-md-6">
                    <label asp-for="DienThoai" class="form-label">Điện thoại <sup>*</sup></label>
                    <input asp-for="DienThoai" class="form-control" placeholder="Số điện thoại..." />
                    <span asp-validation-for="DienThoai" class="text-danger"></span>
                </div>

                <!-- EMAIL -->
                <div class="col-md-6">
                    <label asp-for="Email" class="form-label">Email <sup>*</sup></label>
                    <input asp-for="Email" class="form-control" placeholder="Nhập email..." />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>

                <!-- HÌNH ĐẠI DIỆN + PREVIEW -->
                <div class="col-md-12">
                    <label asp-for="Hinh" class="form-label">Hình đại diện <sup>*</sup></label>
                    <input type="file" name="Hinh" id="avatarInput" class="form-control" />

                    <div class="mt-3">
                        <img id="avatarPreview" src="#" alt="Preview" style="max-width:150px; display:none; border-radius:10px;" />
                    </div>

                    <span asp-validation-for="Hinh" class="text-danger"></span>
                </div>

                <!-- NÚT ĐĂNG KÝ -->
                <div class="col-md-12 pt-3">
                    <button type="submit" class="btn btn-primary py-2 w-100">Đăng ký</button>
                </div>

                <div class="mb-3">
                    <label class="form-label">Loại tài khoản</label>
                    <select name="Role" class="form-select" required>
                        <option value="Customer">Khách hàng</option>
                        <option value="Seller">Người bán</option>
                    </select>
                </div>


            </div>

        </form>
    </div>
</div>

<!-- SCRIPT: HIỆN/ẨN MẬT KHẨU + CHECK ĐỘ MẠNH + PREVIEW ẢNH -->
<script>
    // 🔥 Hiện / Ẩn mật khẩu
    const togglePassword = document.getElementById("togglePassword");
    const passwordField = document.getElementById("passwordInput");

    togglePassword.addEventListener("click", function () {
        const type = passwordField.type === "password" ? "text" : "password";
        passwordField.type = type;

        togglePassword.textContent = type === "password" ? "👁" : "🙈";
    });

    // 🔥 Check độ mạnh mật khẩu
    const passwordStrength = document.getElementById("passwordStrength");

    passwordField.addEventListener("input", function () {
        const value = passwordField.value;

        let strength = "";
        let color = "";

        if (value.length < 6) {
            strength = "Weak";
            color = "red";
        } else if (value.match(/[A-Z]/) && value.match(/[0-9]/)) {
            strength = "Strong";
            color = "green";
        } else {
            strength = "Medium";
            color = "orange";
        }

        passwordStrength.textContent = "Độ mạnh mật khẩu: " + strength;
        passwordStrength.style.color = color;
    });

    // 🔥 Preview ảnh đại diện
    document.getElementById("avatarInput").addEventListener("change", function (event) {
        const file = event.target.files[0];
        const preview = document.getElementById("avatarPreview");

        if (file) {
            preview.src = URL.createObjectURL(file);
            preview.style.display = "block";
        }
    });
</script>
